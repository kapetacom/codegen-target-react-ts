//#FILENAME:src/server/clients/{{type data.metadata.name}}Client.ts:write-always
//
// GENERATED SOURCE - DO NOT EDIT
//
import {RestClient} from "@kapeta/sdk-rest-client";
{{#eachTypeReference data.spec.methods all=true}}
import { {{type name}} } from "../../entities/{{type name}}";
{{/eachTypeReference}}

class {{type data.metadata.name}}Client {
private readonly client:RestClient;

constructor() {
this.client = new RestClient('{{string data.metadata.name}}');
}

{{#methods data.spec.methods}}


    /**
    * {{comment description}}
    *
    * Throws if service responds with a status code higher than 399 and not 404.
    * For 404 responses, null is returned.
    *
    * HTTP: {{./method}} {{path}}
    */
    async {{method methodName}}(
    {{#arguments arguments}}
        {{variable argumentName}}:{{fieldtype this}}
    {{/arguments}}
    ):Promise<{{returnType responseType}}{{#ifValueType responseType}}|null{{/ifValueType}}> {

    {{#ifValueType responseType}}const result = {{/ifValueType}}await this.client.execute(
    '{{string method}}',
    '{{string path}}',
    [
    {{#arguments arguments}}
        {
        name: '{{string argumentName}}',
        value: {{variable argumentName}},
        transport: '{{string transport}}'
        }
    {{/arguments}}
    ]
    );

    {{#ifValueType responseType}}
        if (result === null) {
            return null;
        }
        return result as {{returnType ../responseType}};
    {{/ifValueType}}
    }

{{/methods}}
}

export default new {{type data.metadata.name}}Client();