kind: kapeta/block-type-frontend:0.0.3
metadata:
  name: kapeta/portal
spec:
  target:
    kind: kapeta/language-target-react-ts:local
  type: service
  providers:
    - kind: kapeta/resource-type-web-page:0.0.3
      metadata:
        name: MyPage
      spec:
        path: /
  consumers:
    - kind: kapeta/resource-type-web-fragment:0.0.3
      metadata:
        name: subpage
      spec:
        path: /subpage
    - kind: kapeta/resource-type-rest-client:0.0.4
      metadata:
        name: tasks
      spec:
        methods:
          addTask:
            description: Add task for user
            method: POST
            path: /tasks/{userId}/{id}
            arguments:
              userId:
                type: string
                transport: path
              id:
                type: string
                transport: path
              task:
                ref: Task
                transport: body
          markAsDone:
            description: Mark task as done
            method: POST
            path: /tasks/{id}/done
            arguments:
              id:
                type: string
                transport: path
          removeTask:
            description: Delete task
            method: DELETE
            path: /tasks/{id}
            arguments:
              id:
                type: string
                transport: path
  entities:
    types:
      - type: enum
        name: TaskState
        description: null
        values:
          - PENDING
          - DONE
      - type: dto
        name: Task
        description: null
        properties:
          id:
            description: null
            type: string
            properties: null
          state:
            description: null
            ref: TaskState
            properties: null
          created:
            type: Date
          views:
            type: integer
          stars:
            type: float
          numberList:
            type: double[]
    source:
      type: kapeta-dsl
      value: |-
        enum TestState {
            OK,TWO
        }

        MyType {
            id:string

            state:TestState
        }
